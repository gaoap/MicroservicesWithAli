Windows PowerShell
版权所有（C） Microsoft Corporation。保留所有权利。

安装最新的 PowerShell，了解新功能和改进！https://aka.ms/PSWindows

PS E:\gaoap_home\2023\MicroservicesWithAli> cd .\MicroservicesWithAli-native-image\
PS E:\gaoap_home\2023\MicroservicesWithAli\MicroservicesWithAli-native-image> mvn -Pnative native:compile
[INFO] Scanning for projects...
[INFO]
[INFO] ---------< com.gaoap.image:MicroservicesWithAli-native-image >----------
[INFO] Building MicroservicesWithAli-native-image 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO]
[INFO] >>> native:0.9.21:compile (default-cli) > package @ MicroservicesWithAli-native-image >>>
[INFO]
[INFO] --- native:0.9.21:add-reachability-metadata (add-reachability-metadata) @ MicroservicesWithAli-native-image ---
[INFO] [graalvm reachability metadata repository for ch.qos.logback:logback-classic:1.4.7]: Configuration directory not found. Trying latest version.
[INFO] [graalvm reachability metadata repository for ch.qos.logback:logback-classic:1.4.7]: Configuration directory is ch.qos.logback\logback-classic\1.4.1
[INFO] [graalvm reachability metadata repository for org.apache.tomcat.embed:tomcat-embed-core:10.1.8]: Configuration directory not found. Trying latest version.
[INFO] [graalvm reachability metadata repository for org.apache.tomcat.embed:tomcat-embed-core:10.1.8]: Configuration directory is org.apache.tomcat.embed\tomcat-embed-core\10.0.20
[INFO]
[INFO] --- resources:3.3.1:resources (default-resources) @ MicroservicesWithAli-native-image ---
[INFO] Copying 1 resource from src\main\resources to target\classes
[INFO] Copying 5 resources from src\main\resources to target\classes
[INFO]
[INFO] --- compiler:3.10.1:compile (default-compile) @ MicroservicesWithAli-native-image ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- resources:3.3.1:testResources (default-testResources) @ MicroservicesWithAli-native-image ---
[INFO] skip non existing resourceDirectory E:\gaoap_home\2023\MicroservicesWithAli\MicroservicesWithAli-native-image\src\test\resources
[INFO]
[INFO] --- compiler:3.10.1:testCompile (default-testCompile) @ MicroservicesWithAli-native-image ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- surefire:2.22.2:test (default-test) @ MicroservicesWithAli-native-image ---
[WARNING] Parameter 'localRepository' is deprecated core expression; Avoid use of ArtifactRepository type. If you need access to local repository, switch to '${repositorySystemSession}
' expression and get LRM from it instead.
[WARNING] Parameter 'systemProperties' is deprecated: Use systemPropertyVariables instead.
[INFO]
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.gaoap.image.nativeimage.NativeImageApplicationTests
18:46:12.023 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Neither @ContextConfiguration nor @ContextHierarchy found for test class [NativeIma
geApplicationTests]: using SpringBootContextLoader
18:46:12.028 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader -- Could not detect default resource locations for test class [com.gaoap.image.nativeimage.Nati
veImageApplicationTests]: no resource found for suffixes {-context.xml, Context.groovy}.
18:46:12.028 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.gaoap.image.n
ativeimage.NativeImageApplicationTests]: NativeImageApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
18:46:12.062 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Using ContextCustomizers for test class [NativeImageApplicationTests]: [ExcludeFilt
erContextCustomizer, DuplicateJsonObjectContextCustomizer, MockitoContextCustomizer, TestRestTemplateContextCustomizer, DisableObservabilityContextCustomizer, PropertyMappingContextCus
tomizer, Customizer]
18:46:12.143 [main] DEBUG org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider -- Identified candidate component class: file [E:\gaoap_home\2023\Microserv
icesWithAli\MicroservicesWithAli-native-image\target\classes\com\gaoap\image\nativeimage\NativeImageApplication.class]
18:46:12.146 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.gaoap.image.nativeimage.NativeImageApplication fo
r test class com.gaoap.image.nativeimage.NativeImageApplicationTests
18:46:12.246 [main] DEBUG org.springframework.test.context.util.TestContextSpringFactoriesUtils -- Skipping candidate TestExecutionListener [org.springframework.test.context.transactio
n.TransactionalTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dep
endencies available. Offending class: [org/springframework/transaction/interceptor/TransactionAttributeSource]
18:46:12.247 [main] DEBUG org.springframework.test.context.util.TestContextSpringFactoriesUtils -- Skipping candidate TestExecutionListener [org.springframework.test.context.jdbc.SqlSc
riptsTestExecutionListener] due to a missing dependency. Specify custom TestExecutionListener classes or make the default TestExecutionListener classes and their required dependencies
available. Offending class: [org/springframework/transaction/interceptor/TransactionAttribute]
18:46:12.249 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Using TestExecutionListeners for test class [NativeImageApplicationTests]: [Servlet
TestExecutionListener, DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, MockitoTestExecutionListener, DependencyInjectionTestExecutionListener, D
irtiesContextTestExecutionListener, EventPublishingTestExecutionListener, ResetMocksTestExecutionListener, RestDocsTestExecutionListener, MockRestServiceServerResetTestExecutionListene
r, MockMvcPrintOnlyOnFailureTestExecutionListener, WebDriverTestExecutionListener, MockWebServiceServerTestExecutionListener]
18:46:12.251 [main] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener -- Before test class: class [NativeImageApplicationTests], class annotate
d with @DirtiesContext [false] with mode [null]

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.0.6)

2023-05-05T18:46:12.575+08:00  INFO 20768 --- [           main] c.g.i.n.NativeImageApplicationTests      : Starting NativeImageApplicationTests using Java 17.0.7 with PID 20768 (starte
d by gaoyd in E:\gaoap_home\2023\MicroservicesWithAli\MicroservicesWithAli-native-image)
2023-05-05T18:46:12.578+08:00  INFO 20768 --- [           main] c.g.i.n.NativeImageApplicationTests      : No active profile set, falling back to 1 default profile: "default"
2023-05-05T18:46:13.732+08:00  INFO 20768 --- [           main] c.g.i.n.NativeImageApplicationTests      : Started NativeImageApplicationTests in 1.433 seconds (process running for 2.5
9)
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.355 s - in com.gaoap.image.nativeimage.NativeImageApplicationTests
[INFO]
[INFO] Results:
[INFO]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO]
[INFO]
[INFO] --- spring-boot:3.0.6:process-aot (process-aot) @ MicroservicesWithAli-native-image ---

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.0.6)

2023-05-05T18:46:15.869+08:00  INFO 24484 --- [           main] c.g.i.n.NativeImageApplication           : Starting NativeImageApplication using Java 17.0.7 with PID 24484 (E:\gaoap_ho
me\2023\MicroservicesWithAli\MicroservicesWithAli-native-image\target\classes started by gaoyd in E:\gaoap_home\2023\MicroservicesWithAli\MicroservicesWithAli-native-image)
2023-05-05T18:46:15.877+08:00  INFO 24484 --- [           main] c.g.i.n.NativeImageApplication           : No active profile set, falling back to 1 default profile: "default"
[INFO]
[INFO] --- jar:3.3.0:jar (default-jar) @ MicroservicesWithAli-native-image ---
[INFO] Building jar: E:\gaoap_home\2023\MicroservicesWithAli\MicroservicesWithAli-native-image\target\MicroservicesWithAli-native-image-0.0.1-SNAPSHOT.jar
[INFO]
[INFO] --- spring-boot:3.0.6:repackage (repackage) @ MicroservicesWithAli-native-image ---
[INFO] Replacing main artifact with repackaged archive
[INFO]
[INFO] <<< native:0.9.21:compile (default-cli) < package @ MicroservicesWithAli-native-image <<<
[INFO]
[INFO]
[INFO] --- native:0.9.21:compile (default-cli) @ MicroservicesWithAli-native-image ---
[INFO] Found GraalVM installation from GRAALVM_HOME variable.
[INFO] [graalvm reachability metadata repository for ch.qos.logback:logback-classic:1.4.7]: Configuration directory not found. Trying latest version.
[INFO] [graalvm reachability metadata repository for ch.qos.logback:logback-classic:1.4.7]: Configuration directory is ch.qos.logback\logback-classic\1.4.1
[INFO] [graalvm reachability metadata repository for org.apache.tomcat.embed:tomcat-embed-core:10.1.8]: Configuration directory not found. Trying latest version.
[INFO] [graalvm reachability metadata repository for org.apache.tomcat.embed:tomcat-embed-core:10.1.8]: Configuration directory is org.apache.tomcat.embed\tomcat-embed-core\10.0.20
[INFO] Executing: D:\Program Files\Java\graalvm-ce-java17-22.3.2\bin\native-image.cmd @target\tmp\native-image-2260817449128135786.args
========================================================================================================================
GraalVM Native Image: Generating 'MicroservicesWithAli-native-image' (executable)...
========================================================================================================================

[1/7] Initializing...                                                                                    (0.0s @ 0.12GB)
Error: Error compiling query code (in C:\Users\gaoyd\AppData\Local\Temp\SVM-7700737270018988499\JNIHeaderDirectives.c). Compiler command ''D:\Program Files\Microsoft Visual Studio\2022
\Community\VC\Tools\MSVC\14.35.32215\bin\Hostx64\x64\cl.exe' /WX /W4 /wd4201 /wd4244 /wd4245 /wd4800 /wd4804 /wd4214 '-ID:\Program Files\Java\graalvm-ce-java17-22.3.2\include\win32' '/
FeC:\Users\gaoyd\AppData\Local\Temp\SVM-7700737270018988499\JNIHeaderDirectives.exe' 'C:\Users\gaoyd\AppData\Local\Temp\SVM-7700737270018988499\JNIHeaderDirectives.c'' output included
error: [JNIHeaderDirectives.c, C:\Users\gaoyd\AppData\Local\Temp\SVM-7700737270018988499\JNIHeaderDirectives.c(1): fatal error C1083: 无法打开包括文件: “stdio.h”: No such file or dir
ectory]
Error: Use -H:+ReportExceptionStackTraces to print stacktrace of underlying exception
------------------------------------------------------------------------------------------------------------------------
                         0.3s (3.2% of total time) in 9 GCs | Peak RSS: 0.79GB | CPU load: 0.48
========================================================================================================================
Failed generating 'MicroservicesWithAli-native-image' after 7.8s.
Error: Image build request failed with exit status 1
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  20.450 s
[INFO] Finished at: 2023-05-05T18:46:29+08:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.graalvm.buildtools:native-maven-plugin:0.9.21:compile (default-cli) on project MicroservicesWithAli-native-image: Execution of D:\Program Files\Java\
graalvm-ce-java17-22.3.2\bin\native-image.cmd @target\tmp\native-image-2260817449128135786.args returned non-zero result -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
PS E:\gaoap_home\2023\MicroservicesWithAli\MicroservicesWithAli-native-image>
